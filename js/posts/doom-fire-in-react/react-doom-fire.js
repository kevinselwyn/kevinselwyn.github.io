!function(t){var n={};function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:i})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var r in t)e.d(i,r,function(n){return t[n]}.bind(null,r));return i},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=4)}([function(t,n){t.exports=React},function(t,n){t.exports=PropTypes},,,function(t,n,e){"use strict";e.r(n);var i=e(0),r=e.n(i),o=e(1),a=e.n(o);function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t,n){return(h=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}var p=function(t){function n(t){var e,r,o;return function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),r=this,(e=!(o=c(n).call(this,t))||"object"!==s(o)&&"function"!=typeof o?l(r):o).canvas=Object(i.createRef)(),e.context=null,e.data=null,e.pixels=[],e.animate=null,e.time=Date.now(),e.interval=1e3/t.fps,e._onInit=e._onInit.bind(l(e)),e._onPixelsInit=e._onPixelsInit.bind(l(e)),e._onCanvasInit=e._onCanvasInit.bind(l(e)),e._onStart=e._onStart.bind(l(e)),e._onStop=e._onStop.bind(l(e)),e._onRun=e._onRun.bind(l(e)),e._onDraw=e._onDraw.bind(l(e)),e}var e,o,a;return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&h(t,n)}(n,t),e=n,(o=[{key:"componentDidMount",value:function(){var t=this.props,n=t.width,e=t.height,i=t.running,r=this.canvas;this.context=r.current.getContext("2d"),this.data=this.context.getImageData(0,0,n,e),this._onInit(),i&&this._onStart()}},{key:"componentDidUpdate",value:function(t){var n=this.props,e=n.width,i=n.height,r=n.running,o=n.fps;this.context instanceof CanvasRenderingContext2D||(this.context=this.canvas.current.getContext("2d"),this.data=this.context.getImageData(0,0,e,i)),t.running!==r&&r&&this._onStart(),t.fps!==o&&(this.interval=1e3/o),t.width===e&&t.height===i||(this.data=this.context.getImageData(0,0,e,i),this._onInit())}},{key:"_onInit",value:function(){this._onPixelsInit(),this._onCanvasInit()}},{key:"_onPixelsInit",value:function(){var t,n=this.props,e=n.width*n.height,i=0;for(this.pixels=this.pixels.slice(0,e),this.pixels.length<e&&(this.pixels=this.pixels.concat(new Array(e-this.pixels.length))),i=0,t=e;i<t;i+=1)this.pixels[i]=0}},{key:"_onCanvasInit",value:function(){var t=this.props,n=t.width,e=t.height,i=t.palette,r=t.transparent,o=this.canvas,a=this.context;o.current.setAttribute("width",n),o.current.setAttribute("height",e),r?a.clearRect(0,0,n,e):(a.fillStyle="#".concat(i[0].toString(16)),a.fillRect(0,0,n,e))}},{key:"_onStart",value:function(){var t=this.props,n=t.width,e=t.height,i=t.palette.length,r=0,o=e-1;for(r=0;r<n;r+=1)this.pixels[r+o*n]=i-1;this._onRun()}},{key:"_onStop",value:function(){this.animate=cancelAnimationFrame(this.animate)}},{key:"_onRun",value:function(){var t=this.interval;this.animate=cancelAnimationFrame(this.animate),this.animate=requestAnimationFrame(this._onRun);var n=Date.now(),e=n-this.time;e>t&&(this.time=n-e%t,this._onDraw())}},{key:"_onDraw",value:function(){var t=this.props,n=t.width,e=t.height,i=t.running,r=t.palette,o=t.transparent,a=this.context,s=this.data,u=0,c=0,l=0;for(a.clearRect(0,0,n,e),c=0;c<n;c+=1)for(l=1;l<e;l+=1){var h=c+l*n,p=this.pixels[h];if(0===p)this.pixels[h-n]=0;else{var f=3&Math.round(3*Math.random()),d=h-f+1,v=p-(1&f);this.pixels[d-n]=v,u+=v}}if(!i)for(l=e-1;l>e-8;l-=1)for(c=0;c<n;c+=1){var y=3&Math.round(3*Math.random()),b=Math.max(this.pixels[c+l*n]-y,0);this.pixels[c+l*n]=b,u+=b}for(l=0;l<e;l+=1)for(c=0;c<n;c+=1){var m=this.pixels[c+l*n],_=r[m];s.data[4*(c+l*n)+0]=_>>16&255,s.data[4*(c+l*n)+1]=_>>8&255,s.data[4*(c+l*n)+2]=255&_,s.data[4*(c+l*n)+3]=o&&0===m?0:255}a.putImageData(s,0,0),u||this._onStop()}},{key:"render",value:function(){return r.a.createElement("canvas",{ref:this.canvas,width:this.props.width,height:this.props.height})}}])&&u(e.prototype,o),a&&u(e,a),n}(i.Component);p.propTypes={width:a.a.number,height:a.a.number,fps:a.a.number,palette:a.a.arrayOf(a.a.number),running:a.a.boolean,transparent:a.a.boolean},p.defaultProps={width:320,height:168,fps:27,palette:[460551,2033415,3084039,4656903,5707527,6758151,7806727,9381639,10432263,11484935,12535559,13059847,14634759,14636807,14636807,14114567,14114567,14116623,13594383,13596431,13598479,13600535,13076247,13078295,13080351,12558111,12558111,12560167,12560167,12562223,12037935,12039983,12039991,13619055,14671775,15724487,16777215],running:!1,transparent:!1},n.default=p}]);